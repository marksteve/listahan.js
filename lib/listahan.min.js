(function(){function q(b,z,a){b.addEventListener?b.addEventListener(z,a,!1):b.attachEvent("on"+z,a)}function g(b){return"keypress"==b.type?String.fromCharCode(b.which):e[b.which]?e[b.which]:o[b.which]?o[b.which]:String.fromCharCode(b.which).toLowerCase()}function r(b){var b=b||{},a=!1,c;for(c in p)b[c]?a=!0:p[c]=0;a||(f=!1)}function k(b,a,c,f,d){var g,e,k=[],i=c.type;if(!h[b])return[];"keyup"==i&&l(b)&&(a=[b]);for(g=0;g<h[b].length;++g)if(e=h[b][g],!(e.seq&&p[e.seq]!=e.level)&&i==e.action&&("keypress"==
i&&!c.metaKey&&!c.ctrlKey||a.sort().join(",")===e.modifiers.sort().join(",")))f&&e.combo==d&&h[b].splice(g,1),k.push(e);return k}function s(b,a){!1===b(a)&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0)}function i(b){"number"!==typeof b.which&&(b.which=b.keyCode);var c=g(b);if(c)if("keyup"==b.type&&a==c)a=!1;else if(!w.stopCallback(b,b.target||b.srcElement)){var e=[];b.shiftKey&&e.push("shift");b.altKey&&e.push("alt");b.ctrlKey&&e.push("ctrl");
b.metaKey&&e.push("meta");var e=k(c,e,b),d,h={},i=!1;for(d=0;d<e.length;++d)e[d].seq?(i=!0,h[e[d].seq]=1,s(e[d].callback,b)):!i&&!f&&s(e[d].callback,b);b.type==f&&!l(c)&&r(h)}}function l(b){return"shift"==b||"ctrl"==b||"alt"==b||"meta"==b}function t(b,a,c){if(!c){if(!j){j={};for(var d in e)95<d&&112>d||e.hasOwnProperty(d)&&(j[e[d]]=d)}c=j[b]?"keydown":"keypress"}"keypress"==c&&a.length&&(c="keydown");return c}function u(b,e,d,i,w){var b=b.replace(/\s+/g," "),j=b.split(" "),m,n,o=[];if(1<j.length){var q=
b,x=d;p[q]=0;x||(x=t(j[0],[]));b=function(){f=x;++p[q];clearTimeout(c);c=setTimeout(r,1E3)};d=function(b){s(e,b);"keyup"!==x&&(a=g(b));setTimeout(r,10)};for(i=0;i<j.length;++i)u(j[i],i<j.length-1?b:d,x,q,i)}else{n="+"===b?["+"]:b.split("+");for(j=0;j<n.length;++j)m=n[j],v[m]&&(m=v[m]),d&&("keypress"!=d&&y[m])&&(m=y[m],o.push("shift")),l(m)&&o.push(m);d=t(m,o,d);h[m]||(h[m]=[]);k(m,o,{type:d},!i,b);h[m][i?"unshift":"push"]({callback:e,modifiers:o,action:d,seq:i,level:w,combo:b})}}for(var e={8:"backspace",
9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},
v={option:"alt",command:"meta","return":"enter",escape:"esc"},j,h={},n={},p={},c,a=!1,f=!1,d=1;20>d;++d)e[111+d]="f"+d;for(d=0;9>=d;++d)e[d+96]=d;q(document,"keypress",i);q(document,"keydown",i);q(document,"keyup",i);var w={bind:function(b,a,c){for(var d=b instanceof Array?b:[b],e=0;e<d.length;++e)u(d[e],a,c);n[b+":"+c]=a;return this},unbind:function(b,a){n[b+":"+a]&&(delete n[b+":"+a],this.bind(b,function(){},a));return this},trigger:function(b,a){n[b+":"+a]();return this},reset:function(){h={};
n={};return this},stopCallback:function(b,a){return-1<(" "+a.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==a.tagName||"SELECT"==a.tagName||"TEXTAREA"==a.tagName||a.contentEditable&&"true"==a.contentEditable}};window.Mousetrap=w;"function"==typeof define&&define.amd&&define("mousetrap",function(){return w})})();
(function(){var q=[].slice;$.fn.listahan=function(){var g,r,k,s,i,l,t,u,e,o,y,v,j,h,n,p;o=arguments[0];y=2<=arguments.length?q.call(arguments,1):[];if("string"===typeof o)this.each(function(){return $(this).trigger(o+".listahan",y)});else{e=$.extend({$parent:$(window),root:0,showDelay:250,distance:0,submenuClass:"submenu",menuInit:function(){},menuOpen:function(){},menuItemAdd:function(c){$(this).text(c.title)},menuItemParent:function(){},menuItemActive:function(){},menuItemClick:function(){}},o);
g=$(this);k={};i=function(c){return $("li",k[c]).each(function(){var a;a=$(this).attr("id");if(k[a])return k[a].hide(),i(a)})};u=null;j=function(c,a){var f,d,i,b,j,h;if((f=k[c.id])&&!f.is(":visible"))if(f.css({position:"absolute",overflowY:"hidden",height:"auto"}).removeClass("left").appendTo(g).show(),$("li",f).removeClass("active"),(d=e.$parent.offset())?(j=d.top,b=d.left):(j=e.$parent.scrollTop(),b=e.$parent.scrollLeft()),d=a.parents("ul").hasClass("left")?a.offset().left-f.outerWidth()-e.distance:
a.offset().left+a.outerWidth()+e.distance,f.offset({left:d}),d=f.offset().left+f.outerWidth()-b-e.$parent.width(),0<d&&f.addClass("left").offset({left:a.offset().left-f.outerWidth()}),d=parseInt(f.css("border-top-width"),10),parseInt(f.css("border-bottom-width"),10),h=a.offset().top-d,i=a.outerHeight(),f.offset({top:h}),b=null,d=f.offset().top+f.outerHeight()-(j+e.$parent.outerHeight()),0<d)if(f.offset({top:h+i-f.outerHeight()}),j-=f.offset().top,j>d?(b=d,f.offset({top:h})):0<j&&(b=j,f.offset({top:f.offset().top+
b})),0<j&&0<d)return f.height(f.outerHeight()-b).css("overflow-y","scroll")};t={};p=e.menu;h=0;for(n=p.length;h<n;h++)l=p[h],t[l.id]=l;s=function(c){var a,f,d,h;t[c.id]=c;d=k[c.parent];d||(d=k[c.parent]=$("<ul/>").addClass(e.submenuClass),h=t[c.parent],f=(null!=h?h.parent:void 0)||e.root,a=k[f],f=$("#"+c.parent,k[f]),f=$.proxy(e.menuItemParent,f),f(h||"root",a,k));a=$("<li/>").attr("id",c.id).data("item",c).on("mouseenter",function(){var a,f,h;clearTimeout(u);a=$(this);for(f=c.parent;f!=null;){a.addClass("active").siblings().removeClass("active");
f=$("li#"+f,g).addClass("active");f=f.size()?f.data("item").parent:null}g.data("active",a.attr("id"));h=$.proxy(e.menuItemActive,this);u=setTimeout(function(){i(c.parent);j(c,a);h(c,d,k)},e.showDelay)}).on("click",function(a){$.proxy(e.menuItemClick,this)(c,d,k,a)}).appendTo(d);$.proxy(e.menuItemAdd,a)(c,d,k)};p=e.menu;h=0;for(n=p.length;h<n;h++)l=p[h],s(l);v=function(c){$("#"+c.id,k[c.parent]).remove();c=k[c.id];null!=c&&($("li",c).each(function(){var a;a=$(this);v(a.data("item"));return a.remove()}),
c.remove())};g.css("position","absolute").hide();r=k[e.root].css("position","absolute");g.data("options",e);g.data("$submenus",k);e.menuInit(g);return g.on("add.listahan",function(c,a){s(a)}).on("remove.listahan",function(c,a){v(a)}).on("clear.listahan",function(c,a){null!=k[a]&&k[a].empty()}).on("show.listahan",function(){g.show();i(e.root);r.is(":visible")||g.append(r);$.proxy(e.menuOpen,this)(g);["up","down","left","right"].forEach(function(c){return Mousetrap.bind(c,function(a){a.preventDefault();
g.trigger(c+".listahan")})})}).on("hide.listahan",function(){g.hide();["up","down","left","right"].forEach(function(c){Mousetrap.unbind(c)})}).on("up.listahan",function(){var c,a;c=$("#"+g.data("active"),g);a=c.prev();a.size()&&(i(c.data("item").parent),j(a.data("item"),a),a.addClass("active").siblings().removeClass("active"),g.data("active",a.attr("id")))}).on("down.listahan",function(){var c,a;c=$("#"+g.data("active"),g);a=c.size()?c.next():$("li",r).first();a.size()&&(c.size()&&i(c.data("item").parent),
j(a.data("item"),a),a.addClass("active").siblings().removeClass("active"),g.data("active",a.attr("id")))}).on("left.listahan",function(){var c;l=$("#"+g.data("active"),g).data("item");c=$("#"+l.parent,g);c.size()&&(i(l.parent),c.addClass("active"),k[l.parent].hide(),g.data("active",c.attr("id")))}).on("right.listahan",function(){var c,a;c=$("#"+g.data("active"),g);l=c.data("item");a=k[l.id];null!=a&&(a=$("li",a).first(),a.size()&&(j(l,c),j(a.data("item"),a),a.addClass("active"),g.data("active",a.attr("id"))))})}}}).call(this);
