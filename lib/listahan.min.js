(function(){function r(b,c,a){b.addEventListener?b.addEventListener(c,a,!1):b.attachEvent("on"+c,a)}function g(b){return"keypress"==b.type?String.fromCharCode(b.which):d[b.which]?d[b.which]:q[b.which]?q[b.which]:String.fromCharCode(b.which).toLowerCase()}function t(b){var b=b||{},a=!1,u;for(u in c)b[u]?a=!0:c[u]=0;a||(f=!1)}function k(b,a,u,e,g){var d,f,k=[],j=u.type;if(!l[b])return[];"keyup"==j&&m(b)&&(a=[b]);for(d=0;d<l[b].length;++d)if(f=l[b][d],!(f.seq&&c[f.seq]!=f.level)&&j==f.action&&("keypress"==
j&&!u.metaKey&&!u.ctrlKey||a.sort().join(",")===f.modifiers.sort().join(",")))e&&f.combo==g&&l[b].splice(d,1),k.push(f);return k}function v(b,a){!1===b(a)&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0)}function n(b){"number"!==typeof b.which&&(b.which=b.keyCode);var a=g(b);if(a)if("keyup"==b.type&&e==a)e=!1;else if(!j.stopCallback(b,b.target||b.srcElement)){var c=[];b.shiftKey&&c.push("shift");b.altKey&&c.push("alt");b.ctrlKey&&c.push("ctrl");
b.metaKey&&c.push("meta");var c=k(a,c,b),d,h={},l=!1;for(d=0;d<c.length;++d)c[d].seq?(l=!0,h[c[d].seq]=1,v(c[d].callback,b)):!l&&!f&&v(c[d].callback,b);b.type==f&&!m(a)&&t(h)}}function m(b){return"shift"==b||"ctrl"==b||"alt"==b||"meta"==b}function w(b,a,c){if(!c){if(!o){o={};for(var e in d)95<e&&112>e||d.hasOwnProperty(e)&&(o[d[e]]=e)}c=o[b]?"keydown":"keypress"}"keypress"==c&&a.length&&(c="keydown");return c}function x(b,d,j,h,o){var b=b.replace(/\s+/g," "),i=b.split(" "),p,n,q=[];if(1<i.length){var r=
b,y=j;c[r]=0;y||(y=w(i[0],[]));b=function(){f=y;++c[r];clearTimeout(a);a=setTimeout(t,1E3)};j=function(b){v(d,b);"keyup"!==y&&(e=g(b));setTimeout(t,10)};for(h=0;h<i.length;++h)x(i[h],h<i.length-1?b:j,y,r,h)}else{n="+"===b?["+"]:b.split("+");for(i=0;i<n.length;++i)p=n[i],s[p]&&(p=s[p]),j&&("keypress"!=j&&z[p])&&(p=z[p],q.push("shift")),m(p)&&q.push(p);j=w(p,q,j);l[p]||(l[p]=[]);k(p,q,{type:j},!h,b);l[p][h?"unshift":"push"]({callback:d,modifiers:q,action:j,seq:h,level:o,combo:b})}}for(var d={8:"backspace",
9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},q={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},z={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},
s={option:"alt",command:"meta","return":"enter",escape:"esc"},o,l={},i={},c={},a,e=!1,f=!1,h=1;20>h;++h)d[111+h]="f"+h;for(h=0;9>=h;++h)d[h+96]=h;r(document,"keypress",n);r(document,"keydown",n);r(document,"keyup",n);var j={bind:function(b,a,c){for(var d=b instanceof Array?b:[b],e=0;e<d.length;++e)x(d[e],a,c);i[b+":"+c]=a;return this},unbind:function(b,a){i[b+":"+a]&&(delete i[b+":"+a],this.bind(b,function(){},a));return this},trigger:function(b,a){i[b+":"+a]();return this},reset:function(){l={};
i={};return this},stopCallback:function(b,a){return-1<(" "+a.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==a.tagName||"SELECT"==a.tagName||"TEXTAREA"==a.tagName||a.contentEditable&&"true"==a.contentEditable}};window.Mousetrap=j;"function"==typeof define&&define.amd&&define("mousetrap",function(){return j})})();
(function(){var r=[].slice;$.fn.listahan=function(){var g,t,k,v,n,m,w,x,d,q,z,s,o,l,i;q=arguments[0];z=2<=arguments.length?r.call(arguments,1):[];if("string"===typeof q)this.each(function(){return $(this).trigger(q+".listahan",z)});else{d=$.extend({$parent:$(window),root:0,showDelay:250,distance:0,submenuClass:"submenu",menuInit:function(){},menuOpen:function(){},menuItemAdd:function(c){$(this).text(c.title)},menuItemParent:function(){},menuItemActive:function(){},menuItemClick:function(){}},q);g=
$(this);k={};n=function(c){return $("li",k[c]).each(function(){var a;a=$(this).attr("id");if(k[a])return k[a].hide(),n(a)})};x=null;s=function(c,a){var e,f,h,j,b,i;if((e=k[c.id])&&!e.is(":visible"))if(e.css({position:"absolute",overflowY:"hidden",height:"auto"}).removeClass("left").appendTo(g).show(),$("li",e).removeClass("active"),(f=d.$parent.offset())?(b=f.top,j=f.left):(b=d.$parent.scrollTop(),j=d.$parent.scrollLeft()),f=a.parents("ul").hasClass("left")?a.offset().left-e.outerWidth()-d.distance:
a.offset().left+a.outerWidth()+d.distance,e.offset({left:f}),f=e.offset().left+e.outerWidth()-j-d.$parent.width(),0<f&&e.addClass("left").offset({left:a.offset().left-e.outerWidth()}),f=parseInt(e.css("border-top-width"),10),parseInt(e.css("border-bottom-width"),10),i=a.offset().top-f,h=a.outerHeight(),e.offset({top:i}),j=null,f=e.offset().top+e.outerHeight()-(b+d.$parent.outerHeight()),0<f)if(e.offset({top:i+h-e.outerHeight()}),b-=e.offset().top,b>f?(j=f,e.offset({top:i})):0<b&&(j=b,e.offset({top:e.offset().top+
j})),0<b&&0<f)return e.height(e.outerHeight()-j).css("overflow-y","scroll")};w={};i=d.menu;o=0;for(l=i.length;o<l;o++)m=i[o],w[m.id]=m;v=function(c){var a,e,f,h;w[c.id]=c;f=k[c.parent];f||(f=k[c.parent]=$("<ul/>").addClass(d.submenuClass),h=w[c.parent],e=(null!=h?h.parent:void 0)||d.root,a=k[e],e=$("#"+c.parent,k[e]),e=$.proxy(d.menuItemParent,e),e(h||"root",a,k));a=$("<li/>").attr("id",c.id).data("item",c).on("mouseenter",function(){var a,b,e;clearTimeout(x);a=$(this);for(b=c.parent;b!=null;){a.addClass("active").siblings().removeClass("active");
b=$("li#"+b,g).addClass("active");b=b.size()?b.data("item").parent:null}g.data("active",a.attr("id"));e=$.proxy(d.menuItemActive,this);x=setTimeout(function(){n(c.parent);s(c,a);e(c,f,k)},d.showDelay)}).on("click",function(a){$.proxy(d.menuItemClick,this)(c,f,k,a)}).appendTo(f);$.proxy(d.menuItemAdd,a)(c,f,k)};i=d.menu;o=0;for(l=i.length;o<l;o++)m=i[o],v(m);g.css("position","absolute").hide();t=k[d.root].css("position","absolute");g.data("options",d);g.data("$submenus",k);d.menuInit(g);return g.on("add.listahan",
function(c,a){return v(a)}).on("clear.listahan",function(c,a){if(null!=k[a])return k[a].empty()}).on("show.listahan",function(){g.show();n(d.root);t.is(":visible")||g.append(t);$.proxy(d.menuOpen,this)(g);["up","down","left","right"].forEach(function(c){return Mousetrap.bind(c,function(a){a.preventDefault();g.trigger(c+".listahan")})})}).on("hide.listahan",function(){g.hide();["up","down","left","right"].forEach(function(c){Mousetrap.unbind(c)})}).on("up.listahan",function(){var c,a;c=$("#"+g.data("active"),
g);a=c.prev();a.size()&&(n(c.data("item").parent),s(a.data("item"),a),a.addClass("active").siblings().removeClass("active"),g.data("active",a.attr("id")))}).on("down.listahan",function(){var c,a;c=$("#"+g.data("active"),g);a=c.size()?c.next():$("li",t).first();a.size()&&(c.size()&&n(c.data("item").parent),s(a.data("item"),a),a.addClass("active").siblings().removeClass("active"),g.data("active",a.attr("id")))}).on("left.listahan",function(){var c;m=$("#"+g.data("active"),g).data("item");c=$("#"+m.parent,
g);c.size()&&(n(m.parent),c.addClass("active"),k[m.parent].hide(),g.data("active",c.attr("id")))}).on("right.listahan",function(){var c,a;c=$("#"+g.data("active"),g);m=c.data("item");a=k[m.id];null!=a&&(a=$("li",a).first(),a.size()&&(s(m,c),s(a.data("item"),a),a.addClass("active"),g.data("active",a.attr("id"))))})}}}).call(this);
