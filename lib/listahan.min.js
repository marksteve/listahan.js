(function(){function r(c,a,b){c.addEventListener?c.addEventListener(a,b,!1):c.attachEvent("on"+a,b)}function h(c){return"keypress"==c.type?String.fromCharCode(c.which):d[c.which]?d[c.which]:s[c.which]?s[c.which]:String.fromCharCode(c.which).toLowerCase()}function t(c){var c=c||{},a=!1,b;for(b in q)c[b]?a=!0:q[b]=0;a||(e=!1)}function g(c,b,a,e,h){var d,g,f=[],i=a.type;if(!j[c])return[];"keyup"==i&&m(c)&&(b=[c]);for(d=0;d<j[c].length;++d)if(g=j[c][d],!(g.seq&&q[g.seq]!=g.level)&&i==g.action&&("keypress"==
i&&!a.metaKey&&!a.ctrlKey||b.sort().join(",")===g.modifiers.sort().join(",")))e&&g.combo==h&&j[c].splice(d,1),f.push(g);return f}function u(c,a){!1===c(a)&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0)}function l(c){"number"!==typeof c.which&&(c.which=c.keyCode);var a=h(c);if(a)if("keyup"==c.type&&b==a)b=!1;else if(!i.stopCallback(c,c.target||c.srcElement)){var k=[];c.shiftKey&&k.push("shift");c.altKey&&k.push("alt");c.ctrlKey&&k.push("ctrl");
c.metaKey&&k.push("meta");var k=g(a,k,c),d,f={},j=!1;for(d=0;d<k.length;++d)k[d].seq?(j=!0,f[k[d].seq]=1,u(k[d].callback,c)):!j&&!e&&u(k[d].callback,c);c.type==e&&!m(a)&&t(f)}}function m(c){return"shift"==c||"ctrl"==c||"alt"==c||"meta"==c}function v(c,a,b){if(!b){if(!o){o={};for(var e in d)95<e&&112>e||d.hasOwnProperty(e)&&(o[d[e]]=e)}b=o[c]?"keydown":"keypress"}"keypress"==b&&a.length&&(b="keydown");return b}function w(c,d,k,f,i){var c=c.replace(/\s+/g," "),l=c.split(" "),p,o,n=[];if(1<l.length){var s=
c,r=k;q[s]=0;r||(r=v(l[0],[]));c=function(){e=r;++q[s];clearTimeout(a);a=setTimeout(t,1E3)};k=function(c){u(d,c);"keyup"!==r&&(b=h(c));setTimeout(t,10)};for(f=0;f<l.length;++f)w(l[f],f<l.length-1?c:k,r,s,f)}else{o="+"===c?["+"]:c.split("+");for(l=0;l<o.length;++l)p=o[l],x[p]&&(p=x[p]),k&&("keypress"!=k&&y[p])&&(p=y[p],n.push("shift")),m(p)&&n.push(p);k=v(p,n,k);j[p]||(j[p]=[]);g(p,n,{type:k},!f,c);j[p][f?"unshift":"push"]({callback:d,modifiers:n,action:k,seq:f,level:i,combo:c})}}for(var d={8:"backspace",
9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},
x={option:"alt",command:"meta","return":"enter",escape:"esc"},o,j={},n={},q={},a,b=!1,e=!1,f=1;20>f;++f)d[111+f]="f"+f;for(f=0;9>=f;++f)d[f+96]=f;r(document,"keypress",l);r(document,"keydown",l);r(document,"keyup",l);var i={bind:function(c,a,b){for(var d=c instanceof Array?c:[c],e=0;e<d.length;++e)w(d[e],a,b);n[c+":"+b]=a;return this},unbind:function(c,a){n[c+":"+a]&&(delete n[c+":"+a],this.bind(c,function(){},a));return this},trigger:function(a,b){n[a+":"+b]();return this},reset:function(){j={};
n={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.contentEditable&&"true"==b.contentEditable}};window.Mousetrap=i;"function"==typeof define&&define.amd&&define("mousetrap",function(){return i})})();
(function(){var r=[].slice;$.fn.listahan=function(){var h,t,g,u,l,m,v,w,d,s,y,x,o,j,n,q;s=arguments[0];y=2<=arguments.length?r.call(arguments,1):[];if("string"===typeof s)this.each(function(){return $(this).trigger(s+".listahan",y)});else{d=$.extend({$parent:$(window),root:0,showDelay:250,distance:0,submenuClass:"submenu",menuInit:function(){},menuOpen:function(){},menuItemAdd:function(a){$(this).text(a.title)},menuItemParent:function(){},menuItemActive:function(){},menuItemClick:function(){}},s);
h=$(this);g={};l=function(a){return $("li",g[a]).each(function(){var a;a=$(this).attr("id");if(g[a])return g[a].hide(),l(a)})};w=null;o=function(a,b){var e,f,i,c,l,k,j;if((e=g[a.id])&&!e.is(":visible"))if(e.css({position:"absolute",overflowY:"hidden",height:"auto"}).appendTo(h).show(),$("li",e).removeClass("active"),(i=d.$parent.offset())?(l=i.top,c=i.left):(l=d.$parent.scrollTop(),c=d.$parent.scrollLeft()),f=function(){e.removeClass("left").offset({left:b.offset().left+b.outerWidth()+d.distance})},
i=function(){e.addClass("left").offset({left:b.offset().left-e.outerWidth()-d.distance})},b.parents("ul").hasClass("left")?i():(f(),f=e.offset().left+e.outerWidth()-c-d.$parent.width(),0<f&&i()),i=parseInt(e.css("border-top-width"),10),parseInt(e.css("border-bottom-width"),10),k=b.offset().top-i,f=b.outerHeight(),e.offset({top:k}),j=c=null,i=e.offset().top+e.outerHeight()-(l+d.$parent.outerHeight()),0<i)if(e.offset({top:k+f-e.outerHeight()}),j=l-e.offset().top,j>i?(c=i,e.offset({top:k})):0<j&&(c=
j,e.offset({top:e.offset().top+c})),0<j&&0<i)return e.height(e.outerHeight()-c).css("overflow-y","scroll")};v={};q=d.menu;j=0;for(n=q.length;j<n;j++)m=q[j],v[m.id]=m;u=function(a){var b,e,f,i;v[a.id]=a;f=g[a.parent];f||(f=g[a.parent]=$("<ul/>").addClass(d.submenuClass),i=v[a.parent],e=(null!=i?i.parent:void 0)||d.root,b=g[e],e=$("#"+a.parent,g[e]),e=$.proxy(d.menuItemParent,e),e(i||"root",b,g));b=$("<li/>").attr("id",a.id).data("item",a).on("mouseenter",function(){var c,b,e;clearTimeout(w);c=$(this);
for(b=a.parent;b!=null;){c.addClass("active").siblings().removeClass("active");b=$("li#"+b,h).addClass("active");b=b.size()?b.data("item").parent:null}h.data("active",c.attr("id"));e=$.proxy(d.menuItemActive,this);w=setTimeout(function(){l(a.parent);o(a,c);e(a,f,g)},d.showDelay)}).on("click",function(b){$.proxy(d.menuItemClick,this)(a,f,g,b)}).appendTo(f);$.proxy(d.menuItemAdd,b)(a,f,g)};q=d.menu;j=0;for(n=q.length;j<n;j++)m=q[j],u(m);x=function(a){$("#"+a.id,g[a.parent]).remove();a=g[a.id];null!=
a&&($("li",a).each(function(){var a;a=$(this);x(a.data("item"));return a.remove()}),a.remove())};h.css("position","absolute").hide();t=g[d.root].css("position","absolute");h.data("options",d);h.data("$submenus",g);d.menuInit(h);return h.on("add.listahan",function(a,b){u(b)}).on("remove.listahan",function(a,b){x(b)}).on("clear.listahan",function(a,b){null!=g[b]&&g[b].empty()}).on("show.listahan",function(){h.show();l(d.root);t.is(":visible")||h.append(t);$.proxy(d.menuOpen,this)(h);["up","down","left",
"right"].forEach(function(a){return Mousetrap.bind(a,function(b){b.preventDefault();h.trigger(a+".listahan")})})}).on("hide.listahan",function(){h.hide();["up","down","left","right"].forEach(function(a){Mousetrap.unbind(a)})}).on("up.listahan",function(){var a,b;a=$("#"+h.data("active"),h);b=a.prev();b.size()&&(l(a.data("item").parent),o(b.data("item"),b),b.addClass("active").siblings().removeClass("active"),h.data("active",b.attr("id")))}).on("down.listahan",function(){var a,b;a=$("#"+h.data("active"),
h);b=a.size()?a.next():$("li",t).first();b.size()&&(a.size()&&l(a.data("item").parent),o(b.data("item"),b),b.addClass("active").siblings().removeClass("active"),h.data("active",b.attr("id")))}).on("left.listahan",function(){var a;m=$("#"+h.data("active"),h).data("item");a=$("#"+m.parent,h);a.size()&&(l(m.parent),a.addClass("active"),g[m.parent].hide(),h.data("active",a.attr("id")))}).on("right.listahan",function(){var a,b;a=$("#"+h.data("active"),h);m=a.data("item");b=g[m.id];null!=b&&(b=$("li",b).first(),
b.size()&&(o(m,a),o(b.data("item"),b),b.addClass("active"),h.data("active",b.attr("id"))))})}}}).call(this);
