(function(){function o(h,a,e){h.addEventListener?h.addEventListener(a,e,!1):h.attachEvent("on"+a,e)}function f(h){return"keypress"==h.type?String.fromCharCode(h.which):b[h.which]?b[h.which]:a[h.which]?a[h.which]:String.fromCharCode(h.which).toLowerCase()}function s(h){var h=h||{},a=!1,e;for(e in v)h[e]?a=!0:v[e]=0;a||(x=!1)}function j(h,a,e,b,c){var f,d,g=[],j=e.type;if(!k[h])return[];"keyup"==j&&i(h)&&(a=[h]);for(f=0;f<k[h].length;++f)if(d=k[h][f],!(d.seq&&v[d.seq]!=d.level)&&j==d.action&&("keypress"==
j&&!e.metaKey&&!e.ctrlKey||a.sort().join(",")===d.modifiers.sort().join(",")))b&&d.combo==c&&k[h].splice(f,1),g.push(d);return g}function p(h,a){!1===h(a)&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0)}function m(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=f(a);if(b)if("keyup"==a.type&&y==b)y=!1;else if(!t.stopCallback(a,a.target||a.srcElement)){var e=[];a.shiftKey&&e.push("shift");a.altKey&&e.push("alt");a.ctrlKey&&e.push("ctrl");
a.metaKey&&e.push("meta");var e=j(b,e,a),c,d={},k=!1;for(c=0;c<e.length;++c)e[c].seq?(k=!0,d[e[c].seq]=1,p(e[c].callback,a)):!k&&!x&&p(e[c].callback,a);a.type==x&&!i(b)&&s(d)}}function i(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function u(a,c,e){if(!e){if(!q){q={};for(var d in b)95<d&&112>d||b.hasOwnProperty(d)&&(q[b[d]]=d)}e=q[a]?"keydown":"keypress"}"keypress"==e&&c.length&&(e="keydown");return e}function r(a,b,e,g,q){var a=a.replace(/\s+/g," "),l=a.split(" "),n,o,m=[];if(1<l.length){var t=
a,w=e;v[t]=0;w||(w=u(l[0],[]));a=function(){x=w;++v[t];clearTimeout(z);z=setTimeout(s,1E3)};e=function(a){p(b,a);"keyup"!==w&&(y=f(a));setTimeout(s,10)};for(g=0;g<l.length;++g)r(l[g],g<l.length-1?a:e,w,t,g)}else{o="+"===a?["+"]:a.split("+");for(l=0;l<o.length;++l)n=o[l],d[n]&&(n=d[n]),e&&("keypress"!=e&&c[n])&&(n=c[n],m.push("shift")),i(n)&&m.push(n);e=u(n,m,e);k[n]||(k[n]=[]);j(n,m,{type:e},!g,a);k[n][g?"unshift":"push"]({callback:b,modifiers:m,action:e,seq:g,level:q,combo:a})}}for(var b={8:"backspace",
9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},
d={option:"alt",command:"meta","return":"enter",escape:"esc"},q,k={},g={},v={},z,y=!1,x=!1,l=1;20>l;++l)b[111+l]="f"+l;for(l=0;9>=l;++l)b[l+96]=l;o(document,"keypress",m);o(document,"keydown",m);o(document,"keyup",m);var t={bind:function(a,b,c){for(var d=a instanceof Array?a:[a],f=0;f<d.length;++f)r(d[f],b,c);g[a+":"+c]=b;return this},unbind:function(a,b){g[a+":"+b]&&(delete g[a+":"+b],this.bind(a,function(){},b));return this},trigger:function(a,b){g[a+":"+b]();return this},reset:function(){k={};
g={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.contentEditable&&"true"==b.contentEditable}};window.Mousetrap=t;"function"==typeof define&&define.amd&&define("mousetrap",function(){return t})})();
(function(){$.fn.listahan=function(o){var f,s,j,p,m,i,u,r;if("string"===typeof o)this.each(function(){return $(this).trigger(o+".listahan")});else return i=$.extend({$parent:$(window),root:0,showDelay:250,distance:0,submenuClass:"submenu",menuInit:function(){},menuOpen:function(){},menuItemAdd:function(b){$(this).text(b.title)},menuItemActive:function(){},menuItemClick:function(){}},o),f=$(this),j={},u=[],m=null,p=function(b){return $("li",j[b]).each(function(){var a;a=$(this).attr("id");if(j[a])return j[a].hide(),
p(a)})},r=function(b,a){var c,d,q,k,g,m;if((c=j[b.id])&&!c.is(":visible"))if(c.css({position:"absolute",overflowY:"hidden",height:"auto"}).removeClass("left").appendTo(f).show(),$("li",c).removeClass("active"),(d=i.$parent.offset())?(g=d.top,k=d.left):(g=i.$parent.scrollTop(),k=i.$parent.scrollLeft()),d=a.parents("ul").hasClass("left")?a.offset().left-c.outerWidth()-i.distance:a.offset().left+a.outerWidth()+i.distance,c.offset({left:d}),d=c.offset().left+c.outerWidth()-k-i.$parent.width(),0<d&&c.addClass("left").offset({left:a.offset().left-
c.outerWidth()}),d=parseInt(c.css("border-top-width"),10),parseInt(c.css("border-bottom-width"),10),m=a.offset().top-d,q=a.outerHeight(),c.offset({top:m}),k=null,d=c.offset().top+c.outerHeight()-(g+i.$parent.outerHeight()),0<d)if(c.offset({top:m+q-c.outerHeight()}),g-=c.offset().top,g>d?(k=d,c.offset({top:m})):0<g&&(k=g,c.offset({top:c.offset().top+k})),0<g&&0<d)return c.height(c.outerHeight()-k).css("overflow-y","scroll")},$.each(i.menu,function(b,a){return u.push(a.parent)}),$.each(i.menu,function(b,
a){var c,d;d=j[a.parent]=j[a.parent]||$("<ul/>").addClass(i.submenuClass);0<$.inArray(a.id,u)&&(a.hasChildren=!0);c=$("<li/>").attr("id",a.id).data("item",a).on("mouseenter",function(){var b,c,g;clearTimeout(m);b=$(this);for(c=a.parent;c!=null;){b.addClass("active").siblings().removeClass("active");c=$("li#"+c,f).addClass("active");c=c.size()?c.data("item").parent:null}f.data("active",b.attr("id"));g=$.proxy(i.menuItemActive,this);m=setTimeout(function(){p(a.parent);r(a,b);g(a,d,j)},i.showDelay)}).on("click",
function(b){$.proxy(i.menuItemClick,this)(a,d,j,b)}).appendTo(d);$.proxy(i.menuItemAdd,c)(a,d,j)}),f.css("position","absolute").hide(),s=j[i.root].css("position","absolute"),i.menuInit(f),f.on("show.listahan",function(){f.show();p(i.root);s.is(":visible")||f.append(s);$.proxy(i.menuOpen,this)(f);["up","down","left","right"].forEach(function(b){return Mousetrap.bind(b,function(a){a.preventDefault();f.trigger(b+".listahan")})})}).on("hide.listahan",function(){f.hide();["up","down","left","right"].forEach(function(b){Mousetrap.unbind(b)})}).on("up.listahan",
function(){var b,a;b=$("#"+f.data("active"),f);a=b.prev();a.size()&&(p(b.data("item").parent),r(a.data("item"),a),a.addClass("active").siblings().removeClass("active"),f.data("active",a.attr("id")))}).on("down.listahan",function(){var b,a;b=$("#"+f.data("active"),f);a=b.size()?b.next():$("li",s).first();a.size()&&(b.size()&&p(b.data("item").parent),r(a.data("item"),a),a.addClass("active").siblings().removeClass("active"),f.data("active",a.attr("id")))}).on("left.listahan",function(){var b,a;a=$("#"+
f.data("active"),f).data("item");b=$("#"+a.parent,f);b.size()&&(p(a.parent),b.addClass("active"),j[a.parent].hide(),f.data("active",b.attr("id")))}).on("right.listahan",function(){var b,a,c;b=$("#"+f.data("active"),f);c=b.data("item");a=j[c.id];null!=a&&(a=$("li",a).first(),a.size()&&(r(c,b),r(a.data("item"),a),a.addClass("active"),f.data("active",a.attr("id"))))})}}).call(this);
