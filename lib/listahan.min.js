(function(){function y(c,a,b){c.addEventListener?c.addEventListener(a,b,!1):c.attachEvent("on"+a,b)}function e(c){return"keypress"==c.type?String.fromCharCode(c.which):d[c.which]?d[c.which]:r[c.which]?r[c.which]:String.fromCharCode(c.which).toLowerCase()}function s(c){var c=c||{},a=!1,b;for(b in p)c[b]?a=!0:p[b]=0;a||(j=!1)}function k(c,a,b,B,e){var d,h,j=[],k=b.type;if(!f[c])return[];"keyup"==k&&l(c)&&(a=[c]);for(d=0;d<f[c].length;++d)if(h=f[c][d],!(h.seq&&p[h.seq]!=h.level)&&k==h.action&&("keypress"==
k&&!b.metaKey&&!b.ctrlKey||a.sort().join(",")===h.modifiers.sort().join(",")))B&&h.combo==e&&f[c].splice(d,1),j.push(h);return j}function t(c,b){!1===c(b)&&(b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.returnValue=!1,b.cancelBubble=!0)}function o(c){"number"!==typeof c.which&&(c.which=c.keyCode);var a=e(c);if(a)if("keyup"==c.type&&b==a)b=!1;else if(!z.stopCallback(c,c.target||c.srcElement)){var i=[];c.shiftKey&&i.push("shift");c.altKey&&i.push("alt");c.ctrlKey&&i.push("ctrl");
c.metaKey&&i.push("meta");var i=k(a,i,c),d,g={},f=!1;for(d=0;d<i.length;++d)i[d].seq?(f=!0,g[i[d].seq]=1,t(i[d].callback,c)):!f&&!j&&t(i[d].callback,c);c.type==j&&!l(a)&&s(g)}}function l(c){return"shift"==c||"ctrl"==c||"alt"==c||"meta"==c}function v(c,b,a){if(!a){if(!m){m={};for(var e in d)95<e&&112>e||d.hasOwnProperty(e)&&(m[d[e]]=e)}a=m[c]?"keydown":"keypress"}"keypress"==a&&b.length&&(a="keydown");return a}function w(c,d,i,g,z){var c=c.replace(/\s+/g," "),u=c.split(" "),h,o,q=[];if(1<u.length){var m=
c,n=i;p[m]=0;n||(n=v(u[0],[]));c=function(){j=n;++p[m];clearTimeout(a);a=setTimeout(s,1E3)};i=function(c){t(d,c);"keyup"!==n&&(b=e(c));setTimeout(s,10)};for(g=0;g<u.length;++g)w(u[g],g<u.length-1?c:i,n,m,g)}else{o="+"===c?["+"]:c.split("+");for(u=0;u<o.length;++u)h=o[u],x[h]&&(h=x[h]),i&&("keypress"!=i&&A[h])&&(h=A[h],q.push("shift")),l(h)&&q.push(h);i=v(h,q,i);f[h]||(f[h]=[]);k(h,q,{type:i},!g,c);f[h][g?"unshift":"push"]({callback:d,modifiers:q,action:i,seq:g,level:z,combo:c})}}for(var d={8:"backspace",
9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},
x={option:"alt",command:"meta","return":"enter",escape:"esc"},m,f={},n={},p={},a,b=!1,j=!1,g=1;20>g;++g)d[111+g]="f"+g;for(g=0;9>=g;++g)d[g+96]=g;y(document,"keypress",o);y(document,"keydown",o);y(document,"keyup",o);var z={bind:function(c,a,b){for(var d=c instanceof Array?c:[c],e=0;e<d.length;++e)w(d[e],a,b);n[c+":"+b]=a;return this},unbind:function(c,a){n[c+":"+a]&&(delete n[c+":"+a],this.bind(c,function(){},a));return this},trigger:function(c,a){n[c+":"+a]();return this},reset:function(){f={};
n={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.contentEditable&&"true"==b.contentEditable}};window.Mousetrap=z;"function"==typeof define&&define.amd&&define("mousetrap",function(){return z})})();
(function(){var y=[].slice;$.fn.listahan=function(){var e,s,k,t,o,l,v,w,d,r,A,x,m,f,n,p;r=arguments[0];A=2<=arguments.length?y.call(arguments,1):[];if("string"===typeof r)this.each(function(){return $(this).trigger(r+".listahan",A)});else{d=$.extend({$parent:$(window),root:0,showDelay:250,distance:0,submenuClass:"submenu",menuInit:function(){},menuOpen:function(){},menuItemAdd:function(a){$(this).text(a.title)},menuItemParent:function(){},menuItemActive:function(){},menuItemClick:function(){}},r);
e=$(this);k={};o=function(a){return $("li",k[a]).each(function(){var a;a=$(this).attr("id");if(k[a])return k[a].hide(),o(a)})};w=null;m=function(a,b){var j,g,f,c,l,i,n,o,m,h,p,q,s,r,t;if((j=k[a.id])&&!j.is(":visible"))if(j.css({position:"absolute",overflowY:"hidden",height:"auto"}).appendTo(e).show(),$("li",j).removeClass("active"),(i=d.$parent.offset())?(h=i.top,m=i.left):(h=d.$parent.scrollTop(),m=d.$parent.scrollLeft()),p=d.$parent.outerWidth(),o=d.$parent.outerHeight(),s=parseInt(j.css("border-top-width"),
10),q=parseInt(j.css("border-bottom-width"),10),t=j.outerWidth(),r=j.outerHeight(),i=b.offset().top-s,l=b.offset().left,n=b.outerWidth(),c=b.outerHeight(),g=function(){var a;a=l+n+d.distance;j.removeClass("left").offset({left:a});return a},f=function(){j.addClass("left").offset({left:l-t-d.distance})},b.parents("ul").hasClass("left")?f():(g=g(),0<g+t-m-p&&f()),j.offset({top:i}),f=i+r-h-o,0<f)if(c=i+c+s+q-r,h-=c,q=0,h>f?(q=f,j.offset({top:i})):(0<h&&(q=h),j.offset({top:c+q})),0<q)return j.height(r-
q).css("overflow-y","scroll")};v={};p=d.menu;f=0;for(n=p.length;f<n;f++)l=p[f],v[l.id]=l;t=function(a){var b,j,g,f;v[a.id]=a;g=k[a.parent];g||(g=k[a.parent]=$("<ul/>").addClass(d.submenuClass),f=v[a.parent],j=(null!=f?f.parent:void 0)||d.root,b=k[j],j=$("#"+a.parent,k[j]),j=$.proxy(d.menuItemParent,j),j(f||"root",b,k));b=$("<li/>").attr("id",a.id).data("item",a).on("mouseenter",function(){var c,b,f;clearTimeout(w);c=$(this);c.addClass("active").siblings().removeClass("active");for(b=a.parent;b!=null;){b=
$("li#"+b,e).addClass("active").siblings().removeClass("active");b=b.size()?b.data("item").parent:null}e.data("active",c.attr("id"));f=$.proxy(d.menuItemActive,this);w=setTimeout(function(){o(a.parent);m(a,c);f(a,g,k)},d.showDelay)}).on("click",function(b){$.proxy(d.menuItemClick,this)(a,g,k,b)}).appendTo(g);$.proxy(d.menuItemAdd,b)(a,g,k)};p=d.menu;f=0;for(n=p.length;f<n;f++)l=p[f],t(l);x=function(a){$("#"+a.id,k[a.parent]).remove();a=k[a.id];null!=a&&($("li",a).each(function(){var a;a=$(this);x(a.data("item"));
return a.remove()}),a.remove())};e.css("position","absolute").hide();s=k[d.root].css("position","absolute");e.data("options",d);e.data("$submenus",k);d.menuInit(e);return e.on("add.listahan",function(a,b){t(b)}).on("remove.listahan",function(a,b){x(b)}).on("clear.listahan",function(a,b){null!=k[b]&&k[b].empty()}).on("show.listahan",function(){e.show();o(d.root);s.is(":visible")||e.append(s);$.proxy(d.menuOpen,this)(e);["up","down","left","right"].forEach(function(a){return Mousetrap.bind(a,function(b){b.preventDefault();
e.trigger(a+".listahan")})})}).on("hide.listahan",function(){e.hide();["up","down","left","right"].forEach(function(a){Mousetrap.unbind(a)})}).on("up.listahan",function(){var a,b;a=$("#"+e.data("active"),e);b=a.prev();b.size()&&(o(a.data("item").parent),m(b.data("item"),b),b.addClass("active").siblings().removeClass("active"),e.data("active",b.attr("id")))}).on("down.listahan",function(){var a,b;a=$("#"+e.data("active"),e);b=a.size()?a.next():$("li",s).first();b.size()&&(a.size()&&o(a.data("item").parent),
m(b.data("item"),b),b.addClass("active").siblings().removeClass("active"),e.data("active",b.attr("id")))}).on("left.listahan",function(){var a;l=$("#"+e.data("active"),e).data("item");a=$("#"+l.parent,e);a.size()&&(o(l.parent),a.addClass("active"),k[l.parent].hide(),e.data("active",a.attr("id")))}).on("right.listahan",function(){var a,b;a=$("#"+e.data("active"),e);l=a.data("item");b=k[l.id];null!=b&&(b=$("li",b).first(),b.size()&&(m(l,a),m(b.data("item"),b),b.addClass("active"),e.data("active",b.attr("id"))))})}}}).call(this);
